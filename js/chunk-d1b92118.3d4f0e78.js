(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d1b92118"],{1832:function(t,a,e){},4238:function(t,a,e){"use strict";var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"btn-group btn-group-sm",attrs:{role:"group","aria-label":"date range"}},[e("button",{staticClass:"btn btn-secondary",class:{active:0==t.tab},attrs:{type:"button"},on:{click:function(a){return t.changeTab(0)}}},[t._v(" "+t._s(t.$t("barRace.global"))+" ")]),e("button",{staticClass:"btn btn-secondary",class:{active:1==t.tab},attrs:{type:"button"},on:{click:function(a){return t.changeTab(1)}}},[t._v(" "+t._s(t.$t("barRace.local"))+" ")])])])},i=[],s={name:"CountrySwitch",props:["tab"],methods:{changeTab:function(t){this.$emit("changeTab",t)}}},r=s,o=e("2877"),c=Object(o["a"])(r,n,i,!1,null,"75e63c53",null);a["a"]=c.exports},"67dc":function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"mBlock"},[e("div",{staticClass:"switch-header"},[e("DataSwitch",{attrs:{"data-type":t.dataType,disabled:1===t.tab&&t.isUk},on:{typeChange:function(a){return t.changeDataType(a)}}}),t.isUk||t.isUs?e("CountrySwitch",{attrs:{tab:t.tab},on:{changeTab:function(a){return t.changeTab(a)}}}):t._e()],1),t.renderComponent&&t.isDataAvailable?e("Map",{attrs:{locationsData:t.locationsData,countryName:1===t.tab?t.countryName:"world","is-rate":t.dataType.includes("Rate")}}):e("div",{staticStyle:{padding:"30px","text-align":"center"}},[t._v(t._s(t.$t("noData")))]),e("div",{staticStyle:{"text-align":"left",opacity:"0.3"}},[t._v("*Data is incomplete, source: GOV.UK and JHU.")]),!t.date||1===t.tab&&t.isUk?t._e():e("SlideController",{attrs:{"start-date":t.currentData[0].date,"end-date":t.currentData[t.currentData.length-1].date,hidePlayButton:!0,"current-date":t.date,lazy:!1,enableEvenIfPaused:!0,playing:!1},on:{change:t.changeDate}})],1)},i=[],s=(e("c740"),e("130f"),e("96cf"),e("1da1")),r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return t.renderComponent?e("div",[e("highcharts",{staticClass:"map",attrs:{"constructor-type":"mapChart",options:t.mapOptions}})],1):t._e()},o=[],c={props:{locationsData:{},countryName:String,isRate:Boolean},data:function(){return{renderComponent:!0}},computed:{mapOptions:function(){var t="UK"===this.countryName||"US"===this.countryName,a={chart:{map:this.countryName,height:500},title:{text:""},mapNavigation:{enabled:!0,enableDoubleClickZoomTo:!0,buttonOptions:{alignTo:"spacingBox"}},colorAxis:{enables:!0,min:0},series:[{name:"Cases",states:{hover:{color:"#BADA55"}},dataLabels:{enabled:!1,format:"{point.name}"},allAreas:t,data:this.locationsData}],tooltip:{}};return this.isRate&&(a.tooltip.pointFormat="{point.name}: <b>{point.value:.2f}</b><br/>"),a}},mounted:function(){}},l=c,u=(e("fb79"),e("2877")),d=Object(u["a"])(l,r,o,!1,null,"438afe04",null),p=d.exports,h=e("fa68"),b=e("4238"),m=e("aef7"),f=e("0a13"),D={name:"MapSection",components:{SlideController:f["a"],Map:p,DataSwitch:h["a"],CountrySwitch:b["a"]},props:{tableData:Object,countryName:String,mainDate:String},data:function(){return{currentData:null,tab:1,locationsData:null,isUk:!0,isUs:!1,isDataAvailable:!0,date:null,renderComponent:!1,dataType:"confirmed"}},mounted:function(){this.init()},watch:{mainDate:function(){if(this.mainDate){var t=Object(m["j"])(this.mainDate,this.currentData[this.currentData.length-1].date);this.changeDate(t)}},"tableData.uk":function(){this.init()},"tableData.country":function(){this.init()},"tableData.global":function(){this.init()}},methods:{init:function(){this.isUk="UK"===this.countryName,this.isUs="US"===this.countryName,this.changeTab(this.isUk||this.isUs?1:0)},changeDate:function(t){this.date=t,this.loadMap()},changeTab:function(t){this.tab=t,(this.isUk||this.isUs)&&1===this.tab?this.currentData=this.isUk?this.tableData.uk:this.tableData.country:this.currentData=this.tableData.global,this.currentData&&(this.date=this.currentData[this.currentData.length-1].date,this.loadMap(!0))},changeDataType:function(t){this.dataType=t,this.loadMap()},loadMap:function(t){var a=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:setImmediate((function(){console.time("map"),a.renderComponent=!1;var e=a.currentData.findIndex((function(t){return t.date===a.date}));a.isDataAvailable=!0,1===a.tab?a.isUk?a.locationsData=Object(m["a"])(a.currentData):(a.isDataAvailable=!(a.isUs&&("cured"===a.dataType||"cRate"===a.dataType)),a.locationsData=Object(m["b"])(a.currentData[e].arr,a.dataType)):a.locationsData=Object(m["c"])(a.currentData[e].arr,a.dataType),t&&a.forceRerender(),a.renderComponent=!0,console.timeEnd("map")}));case 1:case"end":return e.stop()}}),e)})))()},forceRerender:function(){var t=this;this.renderComponent=!1,this.$nextTick((function(){t.renderComponent=!0}))}}},y=D,g=Object(u["a"])(y,n,i,!1,null,null,null);a["default"]=g.exports},"7c43":function(t,a,e){"use strict";var n=e("1832"),i=e.n(n);i.a},ae18:function(t,a,e){},fa68:function(t,a,e){"use strict";var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"dropdown"},[e("button",{staticClass:"btn btn-secondary dropdown-toggle btn-sm",class:{disabled:t.disabled},attrs:{type:"button",id:"dropdownMenu","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v(t._s(t.disabled?t.$t("dataSwitch.number"):t.$t("dataSwitch."+t.dataType)))]),e("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenu"}},t._l(t.options,(function(a){return e("div",{key:a},["#"===a?e("div",{staticClass:"dropdown-divider"}):e("button",{staticClass:"dropdown-item",class:{active:t.dataType===a},attrs:{type:"button"},on:{click:function(e){return t.$emit("typeChange",a)}}},[t._v(t._s(t.$t("dataSwitch."+a)))])])})),0)])},i=[],s={name:"DataSwitch",props:["dataType","disabled"],data:function(){return{options:["confirmed","active","death","cured","#","dRate","cRate"]}},watch:{dataType:function(){window.ga("send","event","data-switch","type-changed",this.dataType)}}},r=s,o=(e("7c43"),e("2877")),c=Object(o["a"])(r,n,i,!1,null,"77083ec9",null);a["a"]=c.exports},fb79:function(t,a,e){"use strict";var n=e("ae18"),i=e.n(n);i.a}}]);
//# sourceMappingURL=chunk-d1b92118.3d4f0e78.js.map